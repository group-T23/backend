{
    "swagger": "2.0",
    "info": {
        "title": "Skupply", 
        "description": "Piattaforma per la compravendita di articoli scolastici", 
        "version": "1.0.0",
        "license":{
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "contact":{
            "name": "Andera Piccin    Dorijan Di Zepp    Simone Rossi",
            "email": "andrea.piccin@studenti.unitn.it"
        }
    },
    "host": "localhost:3000",
    "basePath": "/",
    "tags": [
        {
            "name": "User",
            "description": "APi per la creazione e la ricerca di un utente"
        },
        {
            "name": "Login",
            "description": "API per la fase di login"
        },
        {
            "name": "Product",
            "description": "API per i prodotti"
        },
        {
            "name": "Search",
            "description": "APi per la fase di ricerca dei prodotti"
        },
        {
            "name": "Cart",
            "description": "API per il carrello"
        },
        {
            "name": "Wishlist",
            "description": "APi per la wishlist"
        },
        {
            "name": "Email",
            "description": "API per utilizzare il servizio email"
        }
    ],
    "schemes": ["http", "https"],
    "consumes": ["application/json"],
    "produces": ["application/json"],
    "paths":{
        "/user": {
            "post": {
                "tags": ["User"],
                "summary": "Creazione nuovo utente",
                "description": "Viene effettuata la creazione di un nuovo utente conn seguente salvataggio in DB",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'oggetto user",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/User"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'utente viene creato"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/user/find/username={username}":{
            "get": {
                "tags": ["User"],
                "summary": "Ricerca di un utente",
                "description": "Viene effettuata la ricerca di un utente dato il suo username",
                "parameters": [
                    {
                        "name": "username",
                        "in": "path",
                        "description": "Body contentente lo username dello user",
                        "required": "true"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'utente viene trovato"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/user/username={username}": {
            "get": {
                "tags": ["User"],
                "summary": "Ricerca di un utente",
                "description": "Viene verificata la disponibiltà dello username",
                "parameters": [
                    {
                        "name": "username",
                        "in": "path",
                        "description": "Body contentente lo username dello user",
                        "required": "true"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viene ritornato nella ripsosta un attributo che conferma o meno la disponibilità dello username"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/login": {
            "post": {
                "tags": ["Login"],
                "summary": "Autenticazione utente",
                "description": "Vengono richieste le credenziali di accesso per effettuare l'autenticazione",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email e la password dell'utente",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/LoginParams_EmailId"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'utente viene autenticato"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/email": {
            "get": {
                "tags": ["Email"],
                "summary": "Controlla email",
                "description": "Controlla se l'email è raggiungibile",
                "parameters": [
                  {
                    "name": "email",
                    "in": "path",
                    "description": "Email da controllare",
                    "required": "true",
                    "schema": {
                        "$ref": "#/definitions/EmailParams_Email"
                    }
                  }
                ],
                "responses": {
                    "200": {
                        "description": "L'email è raggiungibile correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "post": {
                "tags": ["Email"],
                "summary": "Verifica email",
                "description": "Viene verificata l'email di un utente per confermare l'account",
                "parameters": [
                    {
                        "name": "code",
                        "in": "body",
                        "description": "Parametro contentente il codice di attivazione dell'account",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/EmailParams_Code"
                          }
                    },
                    {
                        "name": "email",
                        "in": "path",
                        "description": "Email da verificare",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/EmailParams_Email"
                        }
                    }

                ],
                "responses": {
                    "200": {
                        "description": "Viene confermata la verifica dell'account"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/product": {
            "get": {
                "tags": ["Product"],
                "summary": "Ottenere la lista di tutti i prodotti",
                "description": "Viene ritornata una lista contenente tutti i prodotti disponibili",
                "responses": {
                    "200": {
                        "description": "Viene ritornata una lista di articoli"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "post": {
                "tags": ["Product"],
                "summary": "Inserimento nuovo prodotto",
                "description": "Viene inserito un nuovo prodotto all'interno della piattaforma",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente il nuovo articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/Articles"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viene inserito il nuovo prodotto correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "delete": {
                "tags": ["Product"],
                "summary": "Vengono cancellati tutti i prodotti",
                "description": "Vengono rimossi tutti i prodotti presenti nella piattaforma",
                "responses": {
                    "200": {
                        "description": "Vengono rimossi tutti gli articoli correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/product/id={id}": {
            "get": {
                "tags": ["Product"],
                "summary": "Ricerca di un prodotto",
                "description": "Viene cercato, se presente, il prodotto relativo all'id",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Id che identifica il prodotto",
                        "required": "true"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viene ritornato correttamente il prodotto"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "delete": {
                "tags": ["Product"],
                "summary": "Eliminazione di un prodotto",
                "description": "Viene eliminato, se presente, il prodotto relativo all'id",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Id che identifica il prodotto",
                        "required": "true"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viene eliminato correttamente il prodotto"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/search": {
            "get": {
                "tags": ["Search"],
                "summary": "Ricerca dei prodotti con una serie di valori",
                "description": "Vengono cercati tutti i prodotti che rispettano una serie di parametri, tra cui:\nParola chiave\nCateogira\nLocalità\nRange prezzo\nSpedizione\nValutazione\nOrdinamento",
                "parameters": [
                    {
                        "name": "key",
                        "in": "query",
                        "description": "Key identifica la parola chiave per la ricerca"
                    },
                    {
                        "name": "category",
                        "in": "query",
                        "description": "Category indica la categoria di appartenenza del prodotto"
                    },
                    {
                        "name": "location",
                        "in": "query",
                        "description": "Location indica la provenienza dell'articolo"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viene ritornata una lista di uno o più elementi corrispondenti"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/cart": {
            "post": {
                "tags": ["Cart"],
                "summary": "Ritorna una lista di articoli",
                "description": "Viene ritornata la lista degli articoli presenti nel carrello e gli id",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/CartParams_Email"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viengono ritornate due liste. Una contenente i soli id denominata e le quantità dell'articolo denominata 'cart_ids' e un'altra contenente tutto lo schema di ciascun articolo denominata 'cart'"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "put": {
                "tags": ["Cart"],
                "summary": "Viene aggiornata la quantità del prodotto",
                "description": "L'utente seleziona una quantità per l'articolo",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente e l'id dell'articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/CartParams_EmailId"
                        }
                    }
                ]
            },
            "delete": {
                "tags": ["Cart"],
                "summary": "Cancella un determinato articolo dal carrello",
                "description": "L'utente richiede la rimozione di un articolo dal carrello",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente e l'id dell'articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/CartParams_EmailId"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'articolo viene rimosso correttamente dal carrello"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/cart/add": {
            "put": {
                "tags": ["Cart"],
                "summary": "Inserisce un determinato articolo dal carrello",
                "description": "L'utente richiede l'inserimento di un articolo nel carrello",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente e l'id dell'articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/CartParams_EmailId"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'articolo viene inserito correttamente dal carrello"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/cart/all": {
            "delete": {
                "tags": ["Cart"],
                "summary": "Eliminazione articoli",
                "description": "Tutti i prodotti presenti all'interno del carrello vengono eliminati",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/CartParams_Email"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Il carrello viene svuotato correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/wishlist": {
            "delete": {
                "tags": ["Wishlist"],
                "summary": "Eliminazione articolo",
                "description": "L'articolo presente nella wishlist viene rimosso",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente e l'id dell'articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/WishlistParams_EmailId"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'articolo viene rimosso correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            },
            "post": {
                "tags": ["Wishlist"],
                "summary": "Elenco articoli wishlist",
                "description": "Viene ritornato l'elenco degli articoli presenti all'interno della wishlist e un elenco degli id",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/WishlistParams_Email"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viengono ritornate due liste. Una contenente i soli id dell'articolo denominata 'whislist_ids' e un'altra contenente tutto lo schema di ciascun articolo denominata 'wishlist'"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        },
        "/wishlist/add": {
            "post": {
                "tags": ["Wishlist"],
                "summary": "Inserimento articolo",
                "description": "Viene inserito un nuovo articolo all'interno della wishlist",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Body contentente l'email dell'utente e l'id dell'articolo",
                        "required": "true",
                        "schema": {
                            "$ref": "#/definitions/WishlistParams_EmailId"
                          }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "L'articolo viene inserito correttamente"
                    },
                    "400": {
                        "description": "Richiesta mal formata. Mancano dei parametri all'interno della richiesta"
                    },
                    "404": {
                        "description": "Viene ritorntato un codice di errore con rispettivo messaggio"
                    }
                }
            }
        }
    },
    "definitions": {
        "Articles": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "location": {
                    "tpye": "string"
                },
                "state": {
                    "type": "string"
                },
                "price": {
                    "type": "double"
                },
                "quantity": {
                    "type": "integer"
                },
                "shipment": {
                    "type": "string"
                },
                "shimpMentPrice": {
                    "type": "double"
                },
                "handDeliver": {
                    "type": "boolean"
                },
                "handDeliverZone": {
                    "type": "string"
                },
                "isPublished": {
                    "type": "boolean"
                },
                "categories": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id":{
                                "type": "string"
                            }
                        }
                    }
                },
                "photo": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id":{
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "required": ["title", "state", "price", "quantity", "categories", "photos"]
        },
        "User": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "firstName": {
                    "type": "string"
                },
                "lastName": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "email": {
                    "type": "string",
                    "format": "email"
                },
                "password": {
                    "type": "string",
                    "format": "password"
                },
                "address": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "isSeller": {
                    "type": "boolean"
                },
                "isTerms": {
                    "type": "boolean"
                },
                "isVerified": {
                    "type": "boolean"
                },
                "creationDate": {
                    "type": "string",
                    "format": "date"
                },
                "verificationCode": {
                    "type": "string"
                },
                "cart": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "quantity": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "wishlist": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id":{
                                "type": "string"
                            }
                        }
                    }
                },
                "articles": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id":{
                                "type": "string"
                            }
                        }
                    }
                },
                "chats": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id":{
                                "type": "string"
                            }
                        }
                    }
                },
                "reviews": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "rating":{
                                "type": "integer"
                            },
                            "text": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "required": ["firstName", "lastName", "username", "email", "password", "verificationCode", "cart", "wishlist", "articles", "chats", "reviews"] 
        },
        "CartParams_EmailId": {
            "properties": {
                "id": {
                    "type": "string"
                },
                "email": {
                    "type": "string",
                    "format": "email"
                }
            },
            "required": ["id", "email"]
        },
        "CartParams_Email": {
            "properties": {
                "email": {
                    "type": "string",
                    "format": "email"
                }
            },
            "required": ["email"]
        },
        "LoginParams_EmailId": {
            "properties": {
                "email": {
                    "type": "string",
                    "format": "email"
                },
                "password": {
                    "type": "string",
                    "format": "password"
                }
            },
            "required": ["email", "password"]
        },
        "EmailParams_Email": {
            "properties": {
                "email": {
                    "type": "string"
                }
            },
            "required": ["email"]
        },
        "EmailParams_Code": {
            "properties": {
                "code": {
                    "type": "string"
                }
            },
            "required": ["code"]
        },
        "User_Username": {
            "properties": {
                "username": {
                    "type": "string"
                }
            }
        },
        "WishlistParams_Email": {
            "properties": {
                "email": {
                    "type": "string",
                    "format": "email"
                }
            }
        },
        "WishlistParams_EmailId": {
            "properties": {
                "email": {
                    "type": "string",
                    "format": "email"
                },
                "id": {
                    "type": "string"
                }
            }
        }

    }  
}